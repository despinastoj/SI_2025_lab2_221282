# Втора лабараториска вежба по софтверско инженерство
Деспина Стојмировска 221282

**CFG граф**

---Предикатните јазли се обележани со жолта боја---

![CFG](https://github.com/user-attachments/assets/4491f184-a3fa-419b-8b19-39e3879d6046)


**Цикломатска комплексност**

Цикломатската комплексност на еден граф може да се пресмета на неколку начини. Наједноставниот начин е преку броењето на региони. Во овој граф бројот на региони е 8 и плус 1 за целиот граф имаме вкупно 9 како резултат за цикломатската комплексност на овој граф.

**Every statement criteria**

Every statement criteria ни налага сите statements за checkCart да бидат поминати барем еднаш. Минималниот број на тестови е 5 со кои се поминуваат сите 23 statements во мојот граф.

TEST CASE 1
allItems = null; cardNumber = "5458521478569874"
Test Case 1 очекува резултат од типот Runtime Exception со пораката "allItems list can't be null!" . Проверуваме дали листата е null и се фрла исклучок. Nodes кои ги покрива се 1, 2, 3 и 23.

TEST CASE 2
allItems = [null, 1, 100, 0.0 ]; cardNumber = "5458521478569874"
Овој test case исто така очекува исклучок со пораката "Invalid item!" бидејќи вредноста на името е на продуктот е null. Јазлите кои ги покриваме се: 1, 2, 4, 5.1 , 5.2, 6, 7.

TEST CASE 3
allItems = ["Milk", 2, 100, 0.2]; cardNumber = "5458521478569874"
Во овој случај имаме листа која има валидни податоци, влегува во for циклусот и последователно се извршуваат сите операции без притоа да се фрли исклучок. Валиден е и бројот на картичката и исто така не фрла исклучок, се враќа сумата која за овој тест случај изнесува 130.0 . Ги покрива јазлите: 1, 2, 4, 5.1, 5.2, 6, 8, 9, 10, 11, 5.3, 13, 15, 16, 17.1, 17.2, 18, 19, 21, 17.3, 22, 23

TEST CASE 4
allItems = ["Milk", 2, 100, 0.0]; cardNumber = "5448D21478569874"
Овој тест случај за листа прима валидна листа која во овој случај има попуст 0, со цел да влезе во else - от во for циклусот за да се помине и тој statement, воедно во овој тест случај бројот на картичката содржи и невалидна вредност односно наместо број ја има буквата D, затоа очекуваме исклучок со порака "Invalid character in card number!". Јазли кои се изминуваат се: 1, 2, 4, 5.1, 5.2, 6, 8, 10, 12, 5.3, 13, 15, 16, 17.1, 17.2, 18, 19, 17.3, 20, 23.

TEST CASE 5
allItems = ["Milk", 2, 100, 0.0]; cardNumber = "544869874";
Овој тест случај за листата ги има истите вредности како и претходниот. Она што е различно е должината на бројот на картичката која е помала од 16, па воопшто нема да влезе во for циклусот за проверка на вредностите на картичката туку веднаш ќе фрли исклучок со содржина "Invalid card number!". Јазли кои ги поминуваме се: 1, 2, 4, 5.1, 5.2, 6, 8, 10, 12, 5.3, 13, 14, 23.

**Multiple Condition criteria**
if (item.getPrice() > 300 || item.getDiscount() > 0 || item.getQuantity() > 10) 

Имаме 3 услови, па според 2³ = 8 комбинации, но со Lazy Evaluation се сведуваат на 4 потребни случаи:

Test Case (TXX)

allItems = ["Milk", 1, 301, 0]; cardNumber = "5458521478569874"
Според Lazy Evaluation првиот можен случај е првиот дел од изразот да е точен останатото не ни е важно бидејќи според природата на или, доволно е само еден да е точен за целиот израз да е точен, така што тука цената е поголема од 300 останатите не ни интересираат.

Test Case (FTX)

allItems = ["Milk", 11, 10, 0.1]; cardNumber = "5458521478569874"
Во вториот случај бидејќи цената на производот е неточна односно помала од 300, треба да провериме дали вториот израз е точен односно, дали попустот е поголем од 0. Во овој случај попустот е 0.1, односно 10% па со тоа и целиот израз е точен и не не интересира дали третиот дел е точен или неточен.

Test Case (FFT)

allItems = ["Milk", 11, 10, 0]; cardNumber = "5458521478569874"
Во третиот случај првиот дел од изразот е неточен односно цената е помала од 300 и нејзината вредност е 10, додека пак и вредноста на попустот не е поголема од нула, па и вториот дел е неточен, затоа ни е битно дали квантитетот ќе е поголем од 10 бидејќи во спротивно нема да биде точен изразот. Во нашиот случај е поголем од 10, односно е 11, па со тоа и целиот израз е точен. 

Test Case (FFF)

allItems = ["Milk", 5, 100, 0]; cardNumber = "5458521478569874"
Во последниот тест случај за овој критериум мора да провериме дали сите три изрази се неточни, односно дали цената е помала од 300, попустот не е поголем од 0 и има помалку од 10 производи. Во нашиот случај целиот израз не е точен бидејќи ниеден од трите дела не е точен.

**Објаснување на тестовите** 

@Test
    void testEveryStatement() {
        // Test case 1
        RuntimeException ex1 = assertThrows(RuntimeException.class,
                () -> SILab2.checkCart(null, "5458521478569874"));
        assertEquals("allItems list can't be null!", ex1.getMessage());  --> Имаме променлива од типот RuntimeException што значи дека очекуваме некој исклучок, односно прима вредност null за листата. Потоа со assert equals проверуваме дали онаа порака што очекуваме да ја добиеме е иста со онаа која ја добивме односно ја има содржината "allItems list can't be null!".

        // Test case 2
        List<Item> nameNull = List.of(new Item(null, 1, 100, 0));
        RuntimeException ex2 = assertThrows(RuntimeException.class,
                () -> SILab2.checkCart(nameNull, "5458521478569874"));
        assertEquals("Invalid item!", ex2.getMessage());--> Имаме променлива од типот RuntimeException што значи дека очекуваме некој исклучок, односно прима вредност null за името на производот како прв дел од оваа листа. Потоа со assert equals проверуваме дали онаа порака што очекуваме да ја добиеме е иста со онаа која ја добивме односно ја има содржината "Invalid item!".

        // Test case 3
        List<Item> discount = List.of(new Item("Milk", 2, 100, 0.2));
        assertEquals(130.0, SILab2.checkCart(discount, "5458521478569874")); --> Во третиот тест креираме низа чии елементи се валидни односно не се очекува никаков исклучок, затоа проверуваме дали сумата која ќе ни биде вратена ќе биде еднаква со онаа која ја очекуваме односно 130.0. 

        // Test case 4
        List<Item> noDiscount = List.of(new Item("Milk", 2, 100, 0.0));
        RuntimeException ex3 = assertThrows(RuntimeException.class,
                () -> SILab2.checkCart(noDiscount, "5448D21478569874"));
        assertEquals("Invalid character in card number!", ex3.getMessage()); --> Имаме променлива од типот RuntimeException што значи дека очекуваме некој исклучок, бројот на картичката содржи невалиден карактер, листата во овој случај е валидна па исклучокот кој го очекуваме е за картичката. Потоа со assert equals проверуваме дали онаа порака што очекуваме да ја добиеме е иста со онаа која ја добивме односно ја има содржината "Invalid character in card number!".

        // Test case 5
        RuntimeException ex4 = assertThrows(RuntimeException.class,
                () -> SILab2.checkCart(noDiscount, "544869874"));
        assertEquals("Invalid card number!", ex4.getMessage());--> Имаме променлива од типот RuntimeException што значи дека очекуваме некој исклучок, бројот на картичката содржи помалку од 16 карактери, листата во овој случај е валидна па исклучокот кој го очекуваме е за картичката. Потоа со assert equals проверуваме дали онаа порака што очекуваме да ја добиеме е иста со онаа која ја добивме односно ја има содржината "Invalid card number!".


}

 Овие четири тестови се сите на ист принцип односно проверуваат дали резултата кој го очекуваме е еднаков преку оној кој го добиваме преку assertEquals, најважно за овие тестови е да се провери if (item.getPrice() > 300 || item.getDiscount() > 0 || item.getQuantity() > 10) , па во сите четири бројот на картичката, како и листата се валидни и не се очекува никаков исклучок. Вредностите на листата за сите тестови е објаснет во делот Multiple Conditon. 
 @Test
    void testMultipleCondition() {

        // T X X
        assertEquals(271.0, SILab2.checkCart(List.of(new Item("Milk", 1, 301, 0)), "5458521478569874"));

        // F T X
        assertEquals(69.0, SILab2.checkCart(List.of(new Item("Milk", 11, 10, 0.1)), "5458521478569874"));

        // F F T
        assertEquals(51.0, SILab2.checkCart(List.of(new Item("Milk", 10, 9, 0.1)), "5458521478569874"));

        // F F F
        assertEquals(500.0, SILab2.checkCart(List.of(new Item("Milk", 5, 100, 0)), "5458521478569874"));


    }

